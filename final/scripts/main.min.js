const d=new Date;let currentYear=d.getFullYear(),outputFullYear=document.querySelector("#currentyear"),outputLastModified=document.querySelector("#lastmodified"),lastModifiedDate=document.lastModified;outputFullYear.innerHTML=`${currentYear}`,outputLastModified.innerHTML=`${lastModifiedDate}`;const hamButton=document.querySelector("#menu"),navigation=document.querySelector(".navigation");hamButton.addEventListener("click",(()=>{navigation.classList.toggle("open"),hamButton.classList.toggle("open")}));const newsApiUrl="/wdd231/final/data/us.json",testimonialUrl="/wdd231/final/data/testimonial.json";async function testimonialFetch(){try{const t=await fetch(testimonialUrl);if(!t.ok)throw new Exception(`Response status: ${t.status}`);const e=await t.json(),n=document.querySelector("#testimonials");let o="",r="";e.forEach((t=>{r++,r<=2&&(o+=`<li><img src="${t.avatar}" alt="${t.name}" width="80" height="80" loading="lazy" />`,o+=`<p>"${t.message}"</p>`,o+=`<span>${t.name}, ${t.designation}</span></li>`)})),n.innerHTML=o}catch(t){}}async function fetchNewsApi(){let t="";try{let e=await fetch(newsApiUrl);if(!e.ok)throw new Exception(`Error status code ${e.error}`);let n=await e.json(),o=(n.totalResults,n.articles),r=document.getElementById("news-list"),a=0;o.forEach((e=>{a++,a<=20&&(t+=`<div class="row">\n\t\t\t\t\t\t\t\t<div class="blog-row">\n\t\t\t\t\t\t\t\t\t<img src="${e.urlToImage}" alt="${e.title}" width="371" />\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<h4>${e.title}</h4>\n\t\t\t\t\t\t\t\t\t\t<p>${e.description}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`)})),r.innerHTML=t}catch(t){}}const sendContactForm=()=>{let t=document.getElementById("firstname"),e=document.getElementById("lastname"),n=document.getElementById("email"),o=document.getElementById("subject"),r=document.getElementById("content"),a=document.getElementById("company"),l=document.getElementById("project-type"),i=document.getElementById("form-content");if(""!=o.value){let s=document.createElement("div"),c='<div class="form-confirmation">';c+="<h4>Thank you for your contact.</h4>",c+="We received your information:<br><br>",c+=`Name: ${t.value}<br>`,c+=`Last name: ${e.value}<br>`,c+=`Email: ${n.value}<br>`,c+=`Subject: ${o.value}<br>`,c+=`Content: ${r.value}<br><br>`,c+=`Company: ${a.value}<br><br>`,c+=`Project Type: ${l.value}<br><br>`,c+="We will be back to you later!<br>",c+="Makerdia Team",c+="</div>",s.setAttribute("class","form-confirmation"),console.dir(c),i.innerHTML=c}};let sendContact=document.getElementById("send-contact");if(sendContact){sendContact.addEventListener("click",(t=>{t.preventDefault(),sendContactForm()})),document.getElementById("subject").addEventListener("change",(t=>{let e=t.target.value;document.getElementById("quotation").style.display="enquiry"==e||"launch"==e?"block":"none"}))}let newsletterButton=document.getElementById("subscribe-newsletter"),currentStoredSubscription=localStorage.getItem("mkd_newsletter_subscribed");if(newsletterButton){let t=document.querySelector(".newsletter-form"),e=document.getElementById("newsletter-wrapper");if(null!==currentStoredSubscription){let t=localStorage.getItem("mkd_newsletter_email");""!=t&&(e.innerHTML=`<div class="newsletter-message bg-primary">You are now subscribed with the email:<br> ${t}`,e.innerHTML+='<span class="reset-newsletter" id="reset-newsletter">Reset subscription</span></div>')}let n=document.getElementById("reset-newsletter");n&&n.addEventListener("click",(function(){confirm("Are you sure to reset your subscription?")&&(localStorage.removeItem("mkd_newsletter_subscribed"),localStorage.removeItem("mkd_newsletter_email"),localStorage.clear(),t.style.display="block")}))}newsletterButton&&newsletterButton.addEventListener("click",(function(t){t.preventDefault();let e=document.getElementById("newsletter");if(""!=e.value){localStorage.setItem("mkd_newsletter_subscribed",!0),localStorage.setItem("mkd_newsletter_email",e.value),document.querySelector(".text-subscription").innerHTML="Thank you for your subscription!"}})),window.onload=function(){testimonialFetch(),"/final/blog.html"==location.pathname&&fetchNewsApi()};